<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website with Login & Signup Form | CodingNepal</title>

    <!-- Google Fonts Link For Icons -->
    <link rel="stylesheet" th:href="@{https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0}">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css}">

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/orders.css}">

</head>
<body>
    <div th:replace="layout :: header"></div>

    <div style="text-align: center; margin: 20px 0;">
        <h2>List Orders</h2>
    </div>

    <main>
        <div class="container mt-5 mb-5">
            <div class="d-flex justify-content-center row">
                <div class="col-md-10">
                    <div th:each="order : ${orderForm}" class="row p-2 bg-white border rounded mt-2" th:classappend="${orderStat.index == 0} ? '' : ' mt-2'">
                        <div class="col-md-3 mt-1">
                            <img class="img-fluid img-responsive rounded product-image" th:src="${order.ticketClass.event.thumbnailUrl}" alt="Ticket image">
                        </div>
                        <div class="col-md-6 mt-1">
                            <h5>Order ID: <span th:text="${order.order.id}"></span></h5>
                            <p>Order Date: <span th:text="${#temporals.format(order.order.createdAt, 'dd/MM/yyyy hh:mm a')}"
                            ></span></p>
                            <p>Event Title: <span th:text="${order.ticketClass.event.name}"></span></p>
                            <p>Ticket Class: <span th:text="${order.ticketClass.name}"></span></p>
                            <p>Quantity: <span th:text="${order.orderDetail.quantity}"></span></p>
                        </div>
                        <div class="align-items-center align-content-center col-md-3 border-left mt-1">
                            <div class="d-flex flex-row align-items-center">
                                <h4 class="mr-1" th:text="${#numbers.formatDecimal(order.order.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' VND'"></h4>
                            </div>
                            <div class="d-flex flex-column mt-4">
                                <button
                                        class="btn btn-primary btn-sm"
                                        type="button"
                                        data-bs-toggle="modal"
                                        data-bs-target="#orderDetailsModal">
                                    Details
                                </button>
                            </div>
                        </div>
                    </div>



                    <!-- Modal -->
                    <div class="modal fade" id="orderDetailsModal" tabindex="-1" aria-labelledby="orderDetailsLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content ">
                                <div class="modal-header ">
                                    <h5 class="modal-title text-center w-100"  id="orderDetailsLabel">Order Details</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <img class="img-fluid img-responsive rounded product-image " src="https://i.imgur.com/QpjAiHq.jpg" alt="Ticket image" >
                                    <p><strong>Order ID:</strong> 00001</p>
                                    <p><strong>Order Date:</strong> 2025-08-01</p>
                                    <hr>
                                    <p><strong>Event Title:</strong> Summer Music Fest</p>
                                    <p><strong>Event Date:</strong> 2025-08-15</p>
                                    <p><strong>Event Time:</strong> 18:00 - 21:00</p>
                                    <p><strong>Event Location:</strong> Central Park</p>
                                    <hr>
                                    <p><strong>Ticket Code:</strong> ST12345</p>
                                    <p><strong>Ticket Class:</strong> VIP</p>
                                    <p><strong>Quantity:</strong> 2</p>
                                    <p><strong>Price:</strong> 200.000 VND</p>
                                    <hr>
                                    <p><strong>Shipping Cost:</strong> 50.000 VND</p>
                                    <p><strong>Total:</strong> 450.000 </p>
                                    <hr>
                                    <!-- Bạn có thể thêm các trường chi tiết khác ở đây -->
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <div th:replace="layout :: footer"></div>
    <!-- JS -->
    <script th:src="@{/js/script.js}" defer></script>

    <!-- Bootstrap JS Bundle (gồm Popper) -->
    <script th:src="'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'"></script>
</body>
</html>