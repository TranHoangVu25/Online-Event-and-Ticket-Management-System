<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website with Login & Signup Form | CodingNepal</title>

    <!-- Google Fonts Link For Icons -->
    <link rel="stylesheet" th:href="@{https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0}">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- 2. Font Awesome (cho icons) CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- 3. Google Font (Giống với font trong ảnh) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/orders.css}">

</head>
<body>
    <div th:replace="layout :: header"></div>

    <div style="text-align: center; margin: 20px 0;">
        <h2>List Orders</h2>
    </div>

    <main>
        <div class="container mt-5 mb-5">
            <div class="d-flex justify-content-center row">
                <div class="col-md-10">
                    <div th:each="order : ${orderForm}" class="row p-2 bg-white border rounded mt-2" th:classappend="${orderStat.index == 0} ? '' : ' mt-2'">
                        <div class="col-md-3 mt-1">
                            <img class="img-fluid img-responsive rounded product-image" th:src="${order.thumbnailUrl}" alt="Ticket image">
                        </div>
                        <div class="col-md-6 mt-1">
                            <h5>Order ID: <span th:text="${order.orderId}"></span></h5>
                            <p>Order Date: <span th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy hh:mm a')}"
                            ></span></p>
                            <p>Event Title: <span th:text="${order.eventName}"></span></p>
                            <p>Ticket Class: <span th:text="${order.ticketClassName}"></span></p>
                            <p>Quantity: <span th:text="${order.quantity}"></span></p>
                            <p>
                                Status:
                                <span th:text="${order.status == 0 ? 'Pending' : (order.status == 1 ? 'Success' : 'Failed')}"></span>
                            </p>
                        </div>
                        <div class="align-items-center align-content-center col-md-3 border-left mt-1">
                            <div class="d-flex flex-row align-items-center">
                                <h4 class="mr-1" th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' VND'"></h4>
                            </div>
                            <div class="d-flex flex-column mt-4">
<!--                                <button-->
<!--                                        class="btn btn-primary btn-sm"-->
<!--                                        type="button"-->
<!--                                        data-bs-toggle="modal"-->
<!--                                        data-bs-target="#orderDetailsModal"-->
<!--                                        th:onclick="|viewOrderDetail(${order.order.id}, ${order.ticketClass.id})|">-->
<!--                                    Details-->
<!--                                </button>-->

                                <button
                                        class="btn btn-primary btn-sm"
                                        type="button"
                                        data-bs-toggle="modal"
                                        data-bs-target="#orderDetailsModal"
                                        th:onclick="|viewOrderDetail(${order.orderId}, ${order.ticketClassId})|">
                                    Detail
                                </button>
                            </div>
                        </div>
                    </div>



                    <!-- Modal -->
                    <div class="modal fade" id="orderDetailsModal" tabindex="-1" aria-labelledby="orderDetailsLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content ">
                                <div class="modal-header ">
                                    <h5 class="modal-title text-center w-100"  id="orderDetailsLabel">Order Details</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <img id="detailTicketImage" class="img-fluid img-responsive rounded product-image"
                                         alt="Ticket image">

                                    <p><strong>Order ID:</strong> <span id="detailOrderId">00001</span></p>
                                    <p><strong>Order Date:</strong> <span id="detailOrderDate">2025-08-01</span></p>
                                    <hr>

                                    <p><strong>Event Title:</strong> <span id="detailEventTitle">Summer Music Fest</span></p>
                                    <p><strong>Event Date:</strong> <span id="detailEventDate">2025-08-15</span></p>
<!--                                    <p><strong>Event Time:</strong> <span id="detailEventTime">18:00 - 21:00</span></p>-->
                                    <p><strong>Event Location:</strong> <span id="detailEventLocation">Central Park</span></p>
                                    <hr>

<!--                                    <p><strong>Ticket Code:</strong> <span id="detailTicketCode">ST12345</span></p>-->
                                    <p><strong>Ticket Class:</strong> <span id="detailTicketClass">VIP</span></p>
                                    <p><strong>Quantity:</strong> <span id="detailQuantity">2</span></p>
<!--                                    <p><strong>Price:</strong> <span id="detailPrice">200.000 VND</span></p>-->
<!--                                    <hr>-->
                                    <hr>
<!--                                    <p><strong>Shipping Cost:</strong> <span id="detailShippingCost">50.000 VND</span></p>-->
                                    <p><strong>Total:</strong> <span id="detailTotal">450.000</span></p>

                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <div th:replace="layout :: footer"></div>
    <!-- JS -->
<!--    <script th:src="@{/js/script.js}" defer></script>-->
    <script th:src="@{/js/script.js(v=${#dates.createNow().time})}" defer></script>


    <!-- Bootstrap JS Bundle (gồm Popper) -->
    <script th:src="'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'"></script>
</body>
</html>